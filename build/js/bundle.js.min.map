{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","iniciarApp","mostrarServicios","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginador","mostrarResumen","nombreCita","fechaCita","deshabilitarFechaAnterior","horaCita","seccionAnterior","document","querySelector","classList","remove","tabAnterior","add","querySelectorAll","forEach","enlace","addEventListener","e","preventDefault","parseInt","target","dataset","paso","console","log","async","resultado","fetch","db","json","servicio","id","precio","nombreServicio","createElement","textContent","precioServicio","servicioDiv","appendChild","onclick","seleccionarServicio","error","elemento","tagName","parentElement","contains","eliminaServicio","agregaServicio","firstElementChild","nextElementSibling","elementId","filter","servicioObj","resumenDiv","firstChild","removeChild","Object","values","includes","noServicios","headingCita","innerHTML","headingServicios","serviciosCita","costoTotal","contenedorServicio","textoServicio","totalServicio","split","trim","cantPagar","nombreTexto","value","mostrarAlerta","alerta","mensaje","tipo","setTimeout","fechaInput","dia","Date","getUTCDay","horaInput","inputFecha","fechaAhora","getDate","fechaDeshabilitar","getFullYear","getMonth","min"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina=1;\r\nconst cita={\r\n    nombre: '',\r\n    fecha: '',\r\n    hora: '',\r\n    servicios: []\r\n}\r\ndocument.addEventListener('DOMContentLoaded', function(){\r\n    iniciarApp();\r\n});\r\n\r\nfunction iniciarApp(){\r\n    mostrarServicios();\r\n    //resalta div actiual\r\n    mostrarSeccion();\r\n    //oculta o muestra secciones\r\n    cambiarSeccion();\r\n\r\n    paginaSiguiente();\r\n    paginaAnterior();\r\n    botonesPaginador();\r\n    mostrarResumen();\r\n    nombreCita();\r\n    fechaCita();\r\n    deshabilitarFechaAnterior();\r\n    horaCita();\r\n\r\n}\r\n\r\nfunction mostrarSeccion(){\r\n    const seccionAnterior= document.querySelector(\".mostrar-seccion\");\r\n    if  (seccionAnterior){\r\n        seccionAnterior.classList.remove('mostrar-seccion');   \r\n    }\r\n    const tabAnterior=document.querySelector(\".tabs .actual\");\r\n    if(tabAnterior){\r\n        tabAnterior.classList.remove('actual');\r\n    }\r\n\r\n    const seleccionActual = document.querySelector(`#paso-${pagina}`);\r\n    seleccionActual.classList.add(\"mostrar-seccion\");\r\n\r\n    const tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\r\n    tab.classList.add('actual');\r\n\r\n}\r\n\r\nfunction cambiarSeccion(){\r\n    const enlaces = document.querySelectorAll('.tabs button');\r\n    enlaces.forEach(enlace=>{\r\n        enlace.addEventListener('click', e=>{\r\n            e.preventDefault();\r\n            pagina = parseInt(e.target.dataset.paso);\r\n            console.log(pagina);\r\n            mostrarSeccion();\r\n            botonesPaginador();\r\n\r\n\r\n        })\r\n    })\r\n}\r\n\r\nasync function mostrarServicios(){\r\n    try {\r\n        const resultado= await fetch('./servicios.json')  \r\n        const db = await resultado.json();\r\n        //const servicios = db.servicios;\r\n        const {servicios} =db;\r\n        //console.log(servicios);\r\n        servicios.forEach(servicio =>{\r\n            //console.log(servicio);\r\n            const { id, nombre, precio} = servicio;\r\n            //DOM\r\n            const nombreServicio = document.createElement('P');\r\n            nombreServicio.textContent = nombre;\r\n            nombreServicio.classList.add('nombre-servicio');\r\n            //console.log(nombreServicio);\r\n            //DOM\r\n            /* const idServicio = document.createElement('P');\r\n            idServicio.textContent = id;\r\n            idServicio.classList.add('id-servicio'); */\r\n            //console.log(idServicio);\r\n            //DOM\r\n            const precioServicio = document.createElement('P');\r\n            precioServicio.textContent = `$ ${precio}`;\r\n            precioServicio.classList.add('precio-servicio');\r\n            //console.log(precioServicio);\r\n\r\n            const servicioDiv = document.createElement('DIV');\r\n            servicioDiv.classList.add('servicio');\r\n            servicioDiv.dataset.id = id;\r\n            \r\n            servicioDiv.appendChild(nombreServicio);\r\n            servicioDiv.appendChild(precioServicio);\r\n            \r\n            servicioDiv.onclick = seleccionarServicio;\r\n            document.querySelector('#servicios').appendChild(servicioDiv);\r\n\r\n        })\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nfunction seleccionarServicio(e){\r\n    //console.log(e.target.dataset.id);\r\n    let elemento;\r\n    if(e.target.tagName === 'P'){\r\n        elemento = e.target.parentElement; \r\n        //console.log('true');\r\n    }else{\r\n        elemento = e.target;\r\n        //console.log('false');\r\n \r\n    }\r\n    console.log(elemento.dataset.id);\r\n    if (elemento.classList.contains('seleccionado')){\r\n        elemento.classList.remove('seleccionado');\r\n        //const id = parseInt(elemento.dataset.id);\r\n        eliminaServicio(parseInt(elemento.dataset.id));\r\n    }else{\r\n        elemento.classList.add('seleccionado');\r\n        \r\n        const servicioObj = {\r\n            id: parseInt(elemento.dataset.id),\r\n            nombre: elemento.firstElementChild.textContent,\r\n            precio: elemento.firstElementChild.nextElementSibling.textContent\r\n            \r\n        }\r\n         \r\n        agregaServicio(servicioObj);\r\n    }\r\n}\r\n\r\nfunction eliminaServicio(elementId){\r\n    const {servicios}=cita;\r\n    cita.servicios= servicios.filter(servicio=>servicio.id !== elementId);\r\n    console.log(cita.servicios); \r\n    \r\n}\r\n\r\nfunction agregaServicio(servicioObj){\r\n    const {servicios}=cita;\r\n    cita.servicios=[...servicios, servicioObj];\r\n    \r\n    console.log(cita.servicios); \r\n    \r\n}\r\n\r\n\r\nfunction paginaAnterior(){\r\n    const paginaAnterior = document.querySelector(`#anterior`);\r\n    paginaAnterior.addEventListener('click', () => {\r\n        pagina--;\r\n        botonesPaginador();\r\n    });\r\n}\r\n\r\nfunction paginaSiguiente(){\r\n    const paginaSiguiente = document.querySelector(`#siguiente`);\r\n    paginaSiguiente.addEventListener('click', () => {\r\n        pagina++;\r\n        botonesPaginador();\r\n    });\r\n    \r\n    \r\n}\r\n\r\nfunction botonesPaginador(){\r\n    const paginaAnterior = document.querySelector(`#anterior`);\r\n    const paginaSiguiente = document.querySelector(`#siguiente`);\r\n    \r\n    if(pagina===1){\r\n        paginaAnterior.classList.add('ocultar');\r\n        paginaSiguiente.classList.remove('ocultar');\r\n    }else if (pagina===3){\r\n        paginaAnterior.classList.remove('ocultar');\r\n        paginaSiguiente.classList.add('ocultar');\r\n        mostrarResumen();\r\n    }else{\r\n        paginaAnterior.classList.remove('ocultar');\r\n        paginaSiguiente.classList.remove('ocultar');\r\n        \r\n        \r\n    }\r\n    mostrarSeccion();\r\n}\r\n\r\nfunction mostrarResumen(){\r\n    const { nombre, fecha, hora, servicios }=cita;\r\n\r\n    const resumenDiv=document.querySelector('.contenido-resumen');\r\n\r\n    //limpiar html\r\n    //resumenDiv.innerHTML = ''; //Funcionaria de la misma manera, pero consume muchos mas recursos\r\n    while(resumenDiv.firstChild){\r\n        resumenDiv.removeChild(resumenDiv.firstChild);\r\n        console.log('while');\r\n    }\r\n\r\n    if (Object.values(cita).includes('')){\r\n        const noServicios = document.createElement('P');\r\n        noServicios.textContent=  \"Faltan datos de servicios, Hora Fecha o Nombre\";\r\n        noServicios.classList.add('invalidar-cita');\r\n        resumenDiv.appendChild(noServicios);\r\n        console.log(cita);\r\n        \r\n    } else{\r\n        const headingCita=document.createElement('H3');\r\n        headingCita.textContent='Resumen de la Cita';\r\n        resumenDiv.appendChild(headingCita)\r\n\r\n        const nombreCita= document.createElement('P');\r\n        //nombreCita.textContent=`<span>Nombre:</span> ${nombre}`; //trata todo como texto\r\n        nombreCita.innerHTML=`<span>Nombre:</span> ${nombre}`; //Trata <span> como etiqueta\r\n        resumenDiv.appendChild(nombreCita);\r\n        \r\n\r\n        const fechaCita= document.createElement('P');\r\n        fechaCita.innerHTML=`<span>Fecha:</span> ${fecha}`; //Trata <span> como etiqueta\r\n        resumenDiv.appendChild(fechaCita);\r\n\r\n        const horaCita= document.createElement('P');\r\n        horaCita.innerHTML=`<span>Hora:</span> ${hora}`; //Trata <span> como etiqueta\r\n        resumenDiv.appendChild(horaCita);\r\n\r\n        const headingServicios=document.createElement('H3');\r\n        headingServicios.textContent='Resumen Servicios';\r\n        resumenDiv.appendChild(headingServicios)\r\n\r\n        const serviciosCita = document.createElement('DIV');\r\n        serviciosCita.classList.add('resumen-servicios');\r\n\r\n        let costoTotal =0;\r\n\r\n        servicios.forEach( servicio => {\r\n            const contenedorServicio = document.createElement('DIV');\r\n            contenedorServicio.classList.add('contenedor-servicio');\r\n            const textoServicio =document.createElement('P');\r\n            textoServicio.textContent=servicio.nombre;\r\n            const precioServicio =document.createElement('P');\r\n            precioServicio.textContent=servicio.precio;\r\n            precioServicio.classList.add('precio');\r\n            contenedorServicio.appendChild(textoServicio);\r\n            contenedorServicio.appendChild(precioServicio);\r\n            serviciosCita.appendChild(contenedorServicio); //\r\n            \r\n            const totalServicio = servicio.precio.split('$');\r\n            costoTotal += parseInt(totalServicio[1].trim());\r\n             \r\n        })\r\n        \r\n        resumenDiv.appendChild(serviciosCita);\r\n\r\n        const cantPagar = document.createElement('P');\r\n        cantPagar.innerHTML = `<span>Cantidad a Pagar:<span> $ ${costoTotal}`\r\n        cantPagar.classList.add('total');\r\n        resumenDiv.appendChild(cantPagar);\r\n\r\n    }\r\n}\r\n\r\nfunction nombreCita(){\r\n    const nombreInput = document.querySelector('#nombre');\r\n    nombreInput.addEventListener('input',e=>{\r\n        const nombreTexto=e.target.value.trim();\r\n        if (nombreTexto===''){\r\n            mostrarAlerta('Nombre no valido', 'error');\r\n            \r\n        }else{\r\n            cita.nombre=nombreTexto;\r\n            const alerta=document.querySelector('.alerta');\r\n            if(alerta){\r\n                alerta.remove();\r\n            }\r\n        }\r\n        console.log(e.target.value);\r\n    })\r\n}\r\nfunction mostrarAlerta(mensaje, tipo){\r\n    const alertaPrevia=document.querySelector('.alerta');\r\n    if  (alertaPrevia){\r\n        return;\r\n       //alertaPrevia.remove();\r\n    }\r\n    const alerta= document.createElement('DIV');\r\n    alerta.textContent = mensaje;\r\n    console.log(mensaje);\r\n    alerta.classList.add('alerta');\r\n    if (tipo === 'error'){\r\n        alerta.classList.add('error')\r\n    }\r\n    const formulario = document.querySelector('.formulario');\r\n    formulario.appendChild(alerta);\r\n    setTimeout(()=>{\r\n        alerta.remove();\r\n    }, 2000);\r\n    \r\n} \r\nfunction fechaCita(){\r\n    const fechaInput = document.querySelector('#fecha');\r\n    fechaInput.addEventListener('input', e=>{\r\n        const dia = new Date(e.target.value).getUTCDay(); //formato numerico del dia de la semana del 0 al 6\r\n        console.log(dia);\r\n        /* const opciones ={\r\n            day: 'numeric',\r\n            weekday: 'long',\r\n            year: 'numeric',\r\n            month: 'long'\r\n        }\r\n        console.log(dia.toLocaleDateString('es-ES', opciones)); */\r\n        if ([0].includes(dia)){ //0 corresponde a domingo, 1lun.... 6Sab\r\n            e.preventDefault();\r\n            fechaInput.value='';\r\n            mostrarAlerta('Cerrado los fines de semana','error');\r\n        }else{\r\n            cita.fecha=fechaInput.value;\r\n\r\n\r\n        }\r\n    }) \r\n}\r\nfunction horaCita(){\r\n    const horaInput= document.querySelector('#hora');\r\n    horaInput.addEventListener('input', e=>{\r\n        const horaCita = e.target.value;\r\n        const hora= horaCita.split(':');\r\n        if(hora[0]<9||hora[0]>15){\r\n            mostrarAlerta('Ese horario no es valido','error');\r\n           /*  setTimeout(() => {\r\n                horaInput.value='';\r\n\r\n                \r\n            }, 2000); */\r\n            return;\r\n        }\r\n        cita.hora=horaInput.value;\r\n\r\n    })\r\n}\r\n\r\nfunction deshabilitarFechaAnterior(){\r\n    const inputFecha = document.querySelector('#fecha');\r\n    const fechaAhora = new Date();\r\n    const dia = fechaAhora.getDate() +1; //da la fecha El +1 es para deshabilitar tambien el dia actual\r\n    const year =fechaAhora.getFullYear(); //da el año\r\n    const mes =fechaAhora.getMonth() +1; //da el mes (inicia como un arrat, 0=enero 11=Dic)\r\n\r\n    const fechaDeshabilitar = `${year}-${dia}-${mes}`;\r\n    inputFecha.min = fechaDeshabilitar;\r\n    console.log(fechaDeshabilitar);\r\n}\r\n"]}